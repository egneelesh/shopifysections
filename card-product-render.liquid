{% comment %}
  Used only for AJAX rendering of product cards
  Fetches a product by handle and renders using 'card-product' snippet
{% endcomment %}

{% assign path_parts = request.path | split: '/' %}
{% assign handle = path_parts.last %}
{% assign product = all_products[handle] %}

{% if product %}
  <div class="recently-viewed__item">
    {% render 'card-product',
      card_product: product,
      media_size: 'square',
      show_secondary_image: true,
      section_id: section.id
    %}
  </div>
{% endif %}
