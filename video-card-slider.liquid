<!-- File: sections/know-jockey-slider.liquid -->
<style>
.know-jockey-slider {
  background: {{ section.settings.bg_color | default: '#1c2331' }};
  padding: 60px 0;
  font-family: 'Arial', sans-serif;
}

.know-jockey-slider .page-width {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

.slider-header {
  text-align: {{ section.settings.heading_align | default: 'center' }};
  margin-bottom: 40px;
}

.slider-header h2 {
  color: {{ section.settings.heading_color | default: '#ffffff' }};
  font-size: {{ section.settings.heading_size | default: 32 }}px;
  font-weight: 700;
  letter-spacing: 2px;
  text-transform: uppercase;
  margin: 0 0 10px;
}

.slider-header p {
  color: {{ section.settings.subheading_color | default: '#dddddd' }};
  font-size: {{ section.settings.subheading_size | default: 18 }}px;
  text-align: {{ section.settings.subheading_align | default: 'center' }};
  margin: 0;
  font-weight: 300;
}

.knowSwiper {
  position: relative;
  overflow: hidden;
}

.swiper-wrapper {
  display: flex;
  transition-timing-function: ease-out;
}

.swiper-slide {
  flex-shrink: 0;
  width: 100%;
  position: relative;
}

.slide-card {
  background: #fff;
  border-radius: {{ section.settings.border_radius | default: 12 }}px;
  overflow: hidden;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease;
  height: 100%;
}

.slide-card:hover {
  transform: translateY(-5px);
}

.video-slide, .image-slide {
  position: relative;
  width: 100%;
  height: 300px;
  overflow: hidden;
}

.video-slide video, .image-slide img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.slide-content {
  padding: 20px;
  text-align: center;
}

.slide-content h3 {
  font-size: 18px;
  font-weight: 600;
  margin: 0 0 10px;
  color: #333;
}

.slide-content p {
  font-size: 14px;
  color: #666;
  margin: 0;
  line-height: 1.4;
}

.media-controls {
  position: absolute;
  bottom: 10px;
  right: 10px;
  display: flex;
  gap: 8px;
  z-index: 10;
}

/* Hide play button when autoplay is enabled */
.video-slide.autoplay-enabled .play-btn {
  display: none;
}

/* Show play button on hover when autoplay is enabled */
.video-slide.autoplay-enabled:hover .play-btn {
  display: flex;
}

.play-btn, .sound-btn {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.7);
  color: white;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 14px;
  transition: background 0.2s;
}

.play-btn:hover, .sound-btn:hover {
  background: rgba(0, 0, 0, 0.9);
}

.swiper-button-prev, .swiper-button-next {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: {{ section.settings.arrow_bg | default: '#000000' }};
  color: {{ section.settings.arrow_color | default: '#ffffff' }};
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  z-index: 10;
  cursor: pointer;
  opacity: 0.7;
  transition: opacity 0.2s;
}

.swiper-button-prev:hover, .swiper-button-next:hover {
  opacity: 1;
}

.swiper-button-prev {
  left: 10px;
}

.swiper-button-next {
  right: 10px;
}

.swiper-button-prev::after, .swiper-button-next::after {
  font-size: 18px;
  font-weight: bold;
}

.swiper-pagination {
  position: relative;
  margin-top: 20px;
  display: flex;
  justify-content: center;
  gap: 8px;
}

.swiper-pagination-bullet {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: {{ section.settings.dots_color | default: '#ffffff' }};
  opacity: 0.5;
  cursor: pointer;
  transition: opacity 0.2s;
}

.swiper-pagination-bullet-active {
  opacity: 1;
}

/* Responsive styles */
@media (max-width: 768px) {
  .know-jockey-slider {
    padding: 40px 0;
  }
  
  .slider-header {
    margin-bottom: 30px;
  }
  
  .slider-header h2 {
    font-size: 24px;
  }
  
  .slider-header p {
    font-size: 16px;
  }
  
  .video-slide, .image-slide {
    height: 250px;
  }
}

@media (max-width: 480px) {
  .know-jockey-slider {
    padding: 30px 0;
  }
  
  .slider-header h2 {
    font-size: 20px;
  }
  
  .slider-header p {
    font-size: 14px;
  }
  
  .video-slide, .image-slide {
    height: 200px;
  }
  
  .slide-content {
    padding: 15px;
  }
  
  .slide-content h3 {
    font-size: 16px;
  }
  
  .slide-content p {
    font-size: 13px;
  }
}
</style>

<section class="know-jockey-slider" style="background: {{ section.settings.bg_color | default: '#1c2331' }};">
  <div class="page-width">
    <div class="slider-header" style="text-align: {{ section.settings.heading_align | default: 'center' }};">
      {% if section.settings.heading != blank %}
        <h2 style="color: {{ section.settings.heading_color | default: '#ffffff' }}; font-size: {{ section.settings.heading_size | default: 32 }}px;">
          {{ section.settings.heading }}
        </h2>
      {% endif %}
      {% if section.settings.subheading != blank %}
        <p style="color: {{ section.settings.subheading_color | default: '#dddddd' }}; font-size: {{ section.settings.subheading_size | default: 18 }}px; text-align: {{ section.settings.subheading_align | default: 'center' }};">
          {{ section.settings.subheading }}
        </p>
      {% endif %}
    </div>

    <div class="swiper knowSwiper">
      <div class="swiper-wrapper">
        {% for block in section.blocks %}
          <div class="swiper-slide">
            <div class="slide-card">
              {% if block.type == 'video' %}
                <div class="video-slide {% if section.settings.autoplay_all %}autoplay-enabled{% endif %}" style="border-radius: {{ section.settings.border_radius | default: 12 }}px; overflow:hidden;">
                  <video 
                    {% if section.settings.autoplay_all %} autoplay muted loop playsinline {% endif %}
                    {% if section.settings.autoplay_active %} data-swiper-autoplay="true" {% endif %}
                    controlslist="nodownload"
                    style="width:100%; height:100%; display:block;">
                    <source src="{{ block.settings.video_url }}" type="video/mp4">
                    Your browser does not support the video tag.
                  </video>
                  {% if section.settings.show_play or section.settings.show_sound %}
                    <div class="media-controls">
                      {% if section.settings.show_play %}
                        <button class="play-btn">▶</button>
                      {% endif %}
                      {% if section.settings.show_sound %}
                        <button class="sound-btn">🔊</button>
                      {% endif %}
                    </div>
                  {% endif %}
                </div>
              {% elsif block.type == 'image' %}
                <div class="image-slide" style="border-radius: {{ section.settings.border_radius | default: 12 }}px; overflow:hidden;">
                  {% if block.settings.image != blank %}
                    <img src="{{ block.settings.image | img_url: '800x' }}" alt="{{ block.settings.image.alt }}" style="width:100%; height:100%; display:block; object-fit: cover;">
                  {% else %}
                    <div style="width:100%; height:100%; background:#f5f5f5; display:flex; align-items:center; justify-content:center; color:#999;">
                      Image placeholder
                    </div>
                  {% endif %}
                </div>
              {% endif %}
              
              <div class="slide-content">
                {% if block.settings.title != blank %}
                  <h3>{{ block.settings.title }}</h3>
                {% endif %}
                {% if block.settings.text != blank %}
                  <p>{{ block.settings.text }}</p>
                {% endif %}
              </div>
            </div>
          </div>
        {% endfor %}
      </div>

      {% if section.settings.show_arrows %}
        <div class="swiper-button-prev" style="background:{{ section.settings.arrow_bg | default: '#000000' }}; color:{{ section.settings.arrow_color | default: '#ffffff' }}">‹</div>
        <div class="swiper-button-next" style="background:{{ section.settings.arrow_bg | default: '#000000' }}; color:{{ section.settings.arrow_color | default: '#ffffff' }}">›</div>
      {% endif %}
      
      {% if section.settings.show_dots %}
        <div class="swiper-pagination"></div>
      {% endif %}
    </div>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Initialize Swiper
  const swiper = new Swiper('.knowSwiper', {
    slidesPerView: {{ section.settings.slides_desktop | default: 3 }},
    spaceBetween: 20,
    loop: {{ section.settings.loop | default: true }},
    centeredSlides: {{ section.settings.center_mode | default: false }},
    {% if section.settings.autoplay %}
    autoplay: {
      delay: {{ section.settings.autoplay_delay | default: 5000 }},
      disableOnInteraction: false,
    },
    {% endif %}
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
    breakpoints: {
      1024: {
        slidesPerView: {{ section.settings.slides_desktop | default: 3 }}
      },
      768: {
        slidesPerView: {{ section.settings.slides_tablet | default: 2 }}
      },
      480: {
        slidesPerView: {{ section.settings.slides_mobile | default: 1 }}
      },
      320: {
        slidesPerView: 1
      }
    }
  });
  
  // Handle video autoplay and controls visibility
  const videoSlides = document.querySelectorAll('.video-slide');
  
  videoSlides.forEach(videoSlide => {
    const video = videoSlide.querySelector('video');
    const playBtn = videoSlide.querySelector('.play-btn');
    const soundBtn = videoSlide.querySelector('.sound-btn');
    
    // If autoplay is enabled, hide play button initially
    if (videoSlide.classList.contains('autoplay-enabled')) {
      if (playBtn) playBtn.style.display = 'none';
    }
    
    // Play/pause functionality
    if (playBtn) {
      playBtn.addEventListener('click', function() {
        if (video.paused) {
          video.play();
          this.textContent = '❚❚';
        } else {
          video.pause();
          this.textContent = '▶';
        }
      });
    }
    
    // Sound toggle functionality
    if (soundBtn) {
      soundBtn.addEventListener('click', function() {
        video.muted = !video.muted;
        this.textContent = video.muted ? '🔇' : '🔊';
      });
    }
    
    // Show controls on hover for autoplay videos
    if (videoSlide.classList.contains('autoplay-enabled')) {
      videoSlide.addEventListener('mouseenter', function() {
        if (playBtn) playBtn.style.display = 'flex';
        if (soundBtn) soundBtn.style.display = 'flex';
      });
      
      videoSlide.addEventListener('mouseleave', function() {
        if (playBtn && !video.paused) playBtn.style.display = 'none';
        // Keep sound button visible if video is playing
        if (soundBtn && video.paused) soundBtn.style.display = 'none';
      });
    }
    
    // Update play button when video ends (for autoplay videos)
    video.addEventListener('ended', function() {
      if (playBtn && videoSlide.classList.contains('autoplay-enabled')) {
        playBtn.textContent = '▶';
        playBtn.style.display = 'flex';
      }
    });
    
    // Update play button when video is paused
    video.addEventListener('pause', function() {
      if (playBtn) {
        playBtn.textContent = '▶';
        // Show play button when video is paused in autoplay mode
        if (videoSlide.classList.contains('autoplay-enabled')) {
          playBtn.style.display = 'flex';
        }
      }
    });
    
    // Update play button when video starts playing
    video.addEventListener('play', function() {
      if (playBtn) {
        playBtn.textContent = '❚❚';
        // Hide play button when video plays in autoplay mode
        if (videoSlide.classList.contains('autoplay-enabled')) {
          playBtn.style.display = 'none';
        }
      }
    });
  });
});
</script>

{% schema %}
{
  "name": "Video Card Slider",
  "settings": [
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#1c2331"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "KNOW JOCKEY"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "heading_size",
      "label": "Heading Font Size",
      "min": 16,
      "max": 60,
      "step": 1,
      "default": 32
    },
    {
      "type": "select",
      "id": "heading_align",
      "label": "Heading Alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "center"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "What's Trending?"
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Subheading Color",
      "default": "#dddddd"
    },
    {
      "type": "range",
      "id": "subheading_size",
      "label": "Subheading Font Size",
      "min": 12,
      "max": 40,
      "step": 1,
      "default": 18
    },
    {
      "type": "select",
      "id": "subheading_align",
      "label": "Subheading Alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "center"
    },
    {
      "type": "checkbox",
      "id": "show_play",
      "label": "Show Play Button",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_sound",
      "label": "Show Sound Button",
      "default": true
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "Card Border Radius",
      "min": 0,
      "max": 50,
      "step": 1,
      "default": 12
    },
    {
      "type": "checkbox",
      "id": "autoplay_all",
      "label": "Autoplay All Videos",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "autoplay_active",
      "label": "Autoplay Active Video Only",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Autoplay Slider",
      "default": false
    },
    {
      "type": "number",
      "id": "autoplay_delay",
      "label": "Autoplay Delay (ms)",
      "default": 5000
    },
    {
      "type": "checkbox",
      "id": "show_arrows",
      "label": "Enable Arrows",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_dots",
      "label": "Enable Dots",
      "default": true
    },
    {
      "type": "color",
      "id": "dots_color",
      "label": "Dots Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "arrow_bg",
      "label": "Arrow Background",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "arrow_color",
      "label": "Arrow Color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "slides_desktop",
      "label": "Slides per view (Desktop)",
      "min": 1,
      "max": 6,
      "step": 1,
      "default": 3
    },
    {
      "type": "range",
      "id": "slides_tablet",
      "label": "Slides per view (Tablet)",
      "min": 1,
      "max": 4,
      "step": 1,
      "default": 2
    },
    {
      "type": "range",
      "id": "slides_mobile",
      "label": "Slides per view (Mobile)",
      "min": 1,
      "max": 2,
      "step": 0.1,
      "default": 1
    },
    {
      "type": "checkbox",
      "id": "center_mode",
      "label": "Enable Center Mode",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "loop",
      "label": "Enable Loop",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "video",
      "name": "Video Block",
      "settings": [
        {
          "type": "url",
          "id": "video_url",
          "label": "Video URL"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Description"
        }
      ]
    },
    {
      "type": "image",
      "name": "Image Block",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Description"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Video Card Slider",
      "category": "Custom",
      "blocks": [
        {
          "type": "image",
          "settings": {
            "title": "QUALITY",
            "text": "E' TIME"
          }
        },
        {
          "type": "image",
          "settings": {
            "title": "JOCKEY",
            "text": "EVEN OUT"
          }
        },
        {
          "type": "image",
          "settings": {
            "title": "JOCKEY",
            "text": "EVEN OUT"
          }
        }
      ]
    }
  ]
}
{% endschema %}